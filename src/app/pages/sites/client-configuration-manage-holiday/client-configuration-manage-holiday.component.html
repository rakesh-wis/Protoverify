<div class="card">
	<div class="card-body">
		<div class="d-flex justify-content-between ign-items-center">
			<div class="d-flex">
				<h2 class="text-primary fs-3 fw-bold">Manage Holiday</h2>
			</div>
		</div>

		<div class="d-flex">
			<div class="form-group">
				<label class="form-label text-primary">Select year </label>
				<select
					class="form-select bg-transparent text-capitalize"
					[(ngModel)]="selectedYear"
					(change)="getData()"
				>
					<option [value]="item" [disabled]="form.id.value" *ngFor="let item of yearsList">
						{{ item }}
					</option>
				</select>
			</div>
		</div>

		<div class="row my-2">
			<div class="col-md-2 col-sm-12" *ngFor="let item of dataList['rows']">
				<div class="d-flex justify-content-between">
					<h4 class="text-primary fw-bold mb-0">{{ item?.holidayDate | date: 'MMMM, dd' }}</h4>
					<mat-icon
						class="text-primary"
						style="height: 16px"
						svgIcon="pen-note-edit"
						role="button"
						(click)="patchForm(item)"
					>
					</mat-icon>
				</div>
				<p class="text-primary text-wrap">{{ item?.holidayName }}</p>
			</div>
			<div class="col-md-2 col-sm-12" *ngIf="dataList?.count === 0">
				<p>No holiday added</p>
			</div>
		</div>

		<div class="d-flex justify-content-start" *ngIf="!showForm">
			<button type="button" class="btn btn-primary" (click)="toggleEdit()">Add new</button>
		</div>

		<div *ngIf="showForm">
			<form [formGroup]="dataForm">
				<div class="row">
					<div class="col-lg-8 col-md-7 col-sm-12 mb-3">
						<div class="form-group">
							<label class="form-label text-primary">Day Name</label>
							<input
								type="text"
								class="form-control"
								id="holidayName"
								placeholder=""
								formControlName="holidayName"
							/>
							<div class="text-left" *ngFor="let error of errorMessages.holidayName">
								<ng-container
									*ngIf="
										form['holidayName'].hasError(error.type) &&
										(form['holidayName'].dirty || form['holidayName'].touched)
									"
								>
									<span class="text-danger">{{ error.message }}</span>
								</ng-container>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-4 col-sm-12 mb-3">
						<div class="form-group">
							<label class="form-label text-primary">Select date</label>
							<div class="input-group">
								<input
									class="form-control"
									placeholder="dd-mm-yyyy"
									name="dp"
									formControlName="holidayDate"
									ngbDatepicker
									#d="ngbDatepicker"
									readonly
								/>
								<button class="btn btn-primary w-25 p-0" (click)="d.toggle()" type="button">
									<mat-icon>calendar_today</mat-icon>
								</button>
							</div>
							<div class="text-left" *ngFor="let error of errorMessages.holidayDate">
								<ng-container
									*ngIf="
										form['holidayDate'].hasError(error.type) &&
										(form['holidayDate'].dirty || form['holidayDate'].touched)
									"
								>
									<span class="text-danger">{{ error.message }}</span>
								</ng-container>
							</div>
						</div>
					</div>
				</div>
				<div class="d-flex justify-content-end">
					<button type="button" class="btn btn-outline-primary" (click)="toggleEdit()">Cancel</button>
					<button type="button" class="btn btn-primary ms-4" (click)="onSubmit()">Submit</button>
				</div>
			</form>
		</div>
	</div>
</div>
