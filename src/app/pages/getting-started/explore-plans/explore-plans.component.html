<div class="container-fluid page-padding">
	<div class="row justify-content-between align-items-center">
		<div class="col-lg-4 col-md-4 col-sm-12">
			<h2 class="text-custom-black fs-3 fw-bold">Plans</h2>
		</div>
		<div class="col-lg-3 col-md-4 col-sm-12 text-end">
			<button type="button" class="btn btn-primary" (click)="requestPlan()">Request New Plan</button>
		</div>
	</div>
	<!-- <div class="mt-3 tabs-plans">
		<div class="d-flex justify-content-between">
			<ul ngbNav #nav="ngbNav" class="nav-tabs justify-content-start" [(activeId)]="selectedTab">
				<li [ngbNavItem]="false">
					<a ngbNavLink class="text-capitalize">Month Price</a>
				</li>
				<li [ngbNavItem]="true">
					<a ngbNavLink class="text-capitalize">Yearly Price</a>
				</li>
			</ul>
			<div [ngbNavOutlet]="nav" class="mt-2"></div>
		</div>
	</div> -->
	<div class="card plan-card shadow-color mt-2">
		<div class="d-flex bg-primary-200 tag border-dotted border-blue border-width-thin py-2 px-3 w-25 mt-3 mb-2">
			<span class="text-primary">Recommended Plans for you</span>
		</div>
		<div class="card-body">
			<div class="row">
				<div class="card-group col-lg-4 col-md-5 col-sm-12" *ngFor="let item of recommendedList['rows']">
					<div
						class="card plan-card-top-border mb-4 border"
						[ngClass]="{
							'border-green': item.planFeature.length >= 13,
							'border-blue': item.planFeature.length >= 6 && item.planFeature.length < 13,
							'border-yellow': item.planFeature.length < 6
						}"
					>
						<div class="plan-banner">
							<img [src]="'assets/images/plan-banner-' + getColor(item) + '.svg'" />
						</div>

						<div class="card-body px-4">
							<div class="ps-5">
								<div class="d-flex justify-content-between align-items-center mb-2">
									<h3 class="text-custom-black text-capitalize fs-5 fw-bolder mb-0">
										{{ item.title }}
									</h3>
								</div>
								<p class="text-custom-black-50">{{ item?.description }}</p>
							</div>

							<div
								class="d-flex align-items-center mb-4 plan-features"
								*ngFor="let feature of item.planFeature.slice(0, 3)"
							>
								<div class="">
									<iconify-icon
										class="check-box-icon"
										icon="subway:tick"
										[ngClass]="{
											'check-green': item.planFeature.length >= 13,
											'check-blue': item.planFeature.length >= 6 && item.planFeature.length < 13,
											'check-yellow': item.planFeature.length < 6
										}"
									></iconify-icon>
								</div>
								<p class="text-custom-black-50 text-capitalize mb-1 ps-3">
									{{ getPlanTitle(feature)?.label }}
								</p>
							</div>
							<div class="d-flex justify-content-center align-items-center plan-features">
								<a
									[ngClass]="{
										'view-green': item.planFeature.length >= 13,
										'view-blue': item.planFeature.length >= 6 && item.planFeature.length < 13,
										'view-yellow': item.planFeature.length < 6
									}"
									role="button"
									class="text-underline"
									(click)="view(item)"
								>
									<span> View All </span>
								</a>
							</div>
						</div>
						<div class="px-4">
							<hr class="text-custom-black-50" />
						</div>
						<div class="card-footer border-0 text-center bg-transparent">
							<h2 class="text-primary mb-0 fw-bold">₹ {{ item?.amountPerVerification }}</h2>
							<p class="text-custom-black-50">Per verification</p>

							<div class="d-flex justify-content-center">
								<button
									class="btn"
									[ngClass]="{
										'btn-green': item.planFeature.length >= 13,
										'btn-blue': item.planFeature.length >= 6 && item.planFeature.length < 13,
										'btn-yellow': item.planFeature.length < 6
									}"
									(click)="selectPlan(item)"
								>
									Select
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="d-flex bg-primary-200 tag border-dotted border-blue border-width-thin py-2 px-3 w-25 mt-3 mb-2">
			<span class="text-primary">Your Plan</span>
		</div>
		<div class="card-body">
			<div class="row">
				<div class="card-group col-lg-4 col-md-5 col-sm-12" *ngFor="let item of dataList['rows']">
					<div
						class="card plan-card-top-border mb-4 border"
						[ngClass]="{
							'border-green': item.planFeature.length >= 13,
							'border-blue': item.planFeature.length >= 6 && item.planFeature.length < 13,
							'border-yellow': item.planFeature.length < 6
						}"
					>
						<div class="plan-banner">
							<img [src]="'assets/images/plan-banner-' + getColor(item) + '.svg'" />
						</div>

						<div class="card-body px-4">
							<div class="ps-5">
								<div class="d-flex justify-content-between align-items-center mb-2">
									<h3 class="text-custom-black text-capitalize fs-5 fw-bolder mb-0">
										{{ item.title }}
									</h3>
								</div>
								<p class="text-custom-black-50">{{ item?.description }}</p>
							</div>

							<div
								class="d-flex align-items-center mb-4 plan-features"
								*ngFor="let feature of item.planFeature.slice(0, 3)"
							>
								<div class="">
									<iconify-icon
										class="check-box-icon"
										icon="subway:tick"
										[ngClass]="{
											'check-green': item.planFeature.length >= 13,
											'check-blue': item.planFeature.length >= 6 && item.planFeature.length < 13,
											'check-yellow': item.planFeature.length < 6
										}"
									></iconify-icon>
								</div>
								<p class="text-custom-black-50 text-capitalize mb-1 ps-3">
									{{ getPlanTitle(feature)?.label }}
								</p>
							</div>
							<div class="d-flex justify-content-center align-items-center plan-features">
								<a
									[ngClass]="{
										'view-green': item.planFeature.length >= 13,
										'view-blue': item.planFeature.length >= 6 && item.planFeature.length < 13,
										'view-yellow': item.planFeature.length < 6
									}"
									role="button"
									class="text-underline"
									(click)="view(item)"
								>
									<span> View All </span>
								</a>
							</div>
						</div>
						<div class="px-4">
							<hr class="text-custom-black-50" />
						</div>
						<div class="card-footer border-0 text-center bg-transparent">
							<h2 class="text-primary mb-0 fw-bold">₹ {{ item?.totalAmount }}</h2>
							<p class="text-custom-black-50">Per verification</p>

							<div class="d-flex justify-content-center">
								<button
									class="btn"
									[ngClass]="{
										'btn-green': item.planFeature.length >= 13,
										'btn-blue': item.planFeature.length >= 6 && item.planFeature.length < 13,
										'btn-yellow': item.planFeature.length < 6
									}"
									(click)="selectPlan(item)"
								>
									Select
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="card-footer border-0 bg-transparent pb-4">
			<div class="d-flex justify-content-center" *ngIf="collectionSize > dataList.rows.length">
				<label class="text-primary fs-5" role="button" (click)="onPageChange()"> View all plans</label>
			</div>
		</div>
	</div>
</div>

<app-client-request-plan-list></app-client-request-plan-list>
