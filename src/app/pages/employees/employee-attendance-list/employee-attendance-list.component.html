<div class="card border-primary bg-transparent">
	<div class="card-body bg-transparent">
		<div class="row justify-content-start align-items-center g-2">
			<div class="card col-lg-3 col-md-6 col-sm-12">
				<div class="card-body p-1">
					<app-year-month-picker (change)="selectMonthYear($event)"></app-year-month-picker>
				</div>
			</div>
			<div class="text-center col-lg-6 col-md-6 col-sm-12">
				<h2 class="text-primary fw-bold mb-0">{{ selectedMonthYear }}</h2>
			</div>
			<div class="text-end col-lg-2 col-md-12 col-sm-12">
				<button type="button" class="btn btn-outline-primary w-100" (click)="downloadAttendance()">
					Export Attendance
					<mat-icon style="height: 16px" class="text-white" svgIcon="download"></mat-icon>
				</button>
			</div>
		</div>

		<div class="row justify-content-between my-3">
			<div class="col-lg-4 col-md-4 col-sm-12 text-center">
				<div class="card border-primary">
					<div class="card-body">
						<label class="text-primary">Working days</label>
						<h2 class="text-primary fw-bold mb-0">{{ summaryData?.workingDays }}</h2>
					</div>
				</div>
			</div>
			<div class="col-lg-4 col-md-4 col-sm-12 text-center">
				<div class="card border-primary">
					<div class="card-body">
						<label class="text-primary">Total leaves</label>
						<h2 class="text-primary fw-bold mb-0">{{ summaryData?.totalLeaves }}</h2>
					</div>
				</div>
			</div>
			<div class="col-lg-4 col-md-4 col-sm-12 text-center">
				<div class="card border-primary">
					<div class="card-body">
						<label class="text-primary">Holidays</label>
						<h2 class="text-primary fw-bold mb-0">{{ summaryData?.holidays }}</h2>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<ng-container>
	<div class="table-responsive mt-3">
		<table class="table table-hover">
			<thead>
				<tr>
					<th scope="col">Date</th>
					<th scope="col" class="text-nowrap">Punch In</th>
					<th scope="col" class="text-nowrap">Punch Out</th>
					<th scope="col" class="text-nowrap">Total hour</th>
					<th scope="col">Mark</th>
					<th scope="col" class="text-center text-nowrap">Action</th>
				</tr>
			</thead>
			<tbody *ngIf="dataList['count'] > 0">
				<tr *ngFor="let item of dataList?.rows">
					<td class="text-capitalize text-wrap">
						{{ item?.punchInDate | date: 'dd MMM YYYY' }}
					</td>
					<td class="text-wrap">{{ item?.punchIn | date: 'hh:mm a' }}</td>
					<td class="text-wrap">{{ item?.punchOut | date: 'hh:mm a' }}</td>
					<td class="text-wrap">{{ getDuration(item?.duration) }}</td>
					<td class="text-wrap">{{ item?.mark }}</td>
					<td class="text-nowrap text-center">
						<ng-container *ngIf="item?.status === defaultStatus?.PENDING">
							<button class="btn badge-active" (click)="openConfirmStatus(item, defaultStatus?.APPROVED)">
								Approve
							</button>
							<button
								class="btn badge-rejected ms-3"
								(click)="openConfirmStatus(item, defaultStatus?.REJECTED)"
							>
								Reject
							</button>
						</ng-container>
						<ng-container *ngIf="item?.status != defaultStatus.PENDING">
							<label
								class="text-capitalize"
								[ngClass]="{
									'text-danger': item?.status === defaultStatus?.REJECTED,
									'text-success': item?.status === defaultStatus?.APPROVED
								}"
								>{{ item?.status }}</label
							>
						</ng-container>
					</td>
				</tr>
			</tbody>
			<tbody *ngIf="dataList['count'] === 0">
				<tr>
					<td class="text-center" [attr.colspan]="5">{{ OPTIONS?.noRecord }}</td>
				</tr>
			</tbody>
		</table>
	</div>
	<div class="d-flex justify-content-center align-items-start w-100 p-3" *ngIf="dataList['count'] > 0">
		<ng-container>
			<div
				class="d-flex align-items-center previous-next-items text-primary"
				role="button"
				(click)="onPageChange(page - 1, 'prev')"
				[ngClass]="{ 'text-primary-100': isPrevious() }"
			>
				<mat-icon mat-list-icon>arrow_back</mat-icon>
				<span class="ps-1">Previous</span>
			</div>
		</ng-container>
		<ngb-pagination
			[collectionSize]="collectionSize"
			[(page)]="page"
			[pageSize]="pageSize"
			(pageChange)="onPageChange($event, null)"
			[maxSize]="5"
			[directionLinks]="false"
		>
		</ngb-pagination>
		<ng-container>
			<div
				class="d-flex align-items-center previous-next-items text-primary"
				role="button"
				(click)="onPageChange(page + 1, 'next')"
				[ngClass]="{ 'text-primary-100': isLastPage() }"
			>
				<span class="pe-1">Next</span>
				<mat-icon mat-list-icon>arrow_forward</mat-icon>
			</div>
		</ng-container>
	</div>
</ng-container>
