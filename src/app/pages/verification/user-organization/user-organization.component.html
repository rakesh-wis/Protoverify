<div class="container-fluid page-padding">
	<label class="text-custom-black-80 fs-4 fw-bold" *ngIf="![roles.EMPLOYEE].includes(currentUser?.role)">
		{{ userData?.name }}'s Verification Details
	</label>
	<div class="card my-4 px-3">
		<div class="card-body">
			<div class="row gap-y-2">
				<div class="col-lg-6 col-md-6 col-sm-12">
					<label class="form-label text-custom-black fw-bold me-2">Candidate Name: </label>
					<span class="text-capitalize">{{ userData?.name }}</span>
				</div>
				<div class="col-lg-6 col-md-6 col-sm-12">
					<label class="form-label text-custom-black fw-bold me-2">Mobile Number: </label>
					<span class="text-capitalize">{{ userData?.mobileNumber }}</span>
				</div>
				<div class="col-lg-8 col-md-8 col-sm-12">
					<label class="form-label text-custom-black fw-bold me-2">Candidate Email: </label>
					<span class="text-lowercase">{{ userData?.email }}</span>
				</div>
			</div>
		</div>
	</div>
	<div class="card my-4 px-3">
		<div class="card-header bg-transparent">
			<div class="d-flex justify-content-between align-item-center">
				<div>
					<h2 class="text-custom-black-80 fw-bold mb-0">Organization Name</h2>
				</div>
				<!-- <div><button type="button" class="btn btn-primary ms-4" (click)="onSubmit()">Save</button></div> -->
			</div>
		</div>
		<div class="card-body">
			<form [formGroup]="dataForm">
				<div class="row">
					<div class="col-lg-6 col-md-12 col-sm-12 py-2">
						<div class="form-group">
							<label class="form-label text-custom-black">Company/Organization Name</label>
							<input
								type="text"
								class="form-control"
								id="associateId"
								placeholder=""
								[(ngModel)]="organizationName"
								[ngModelOptions]="{ standalone: true }"
								*ngIf="!isAdminAccess"
								readonly="true"
							/>
							<!-- <ng-select
								class="form-control text-capitalize"
								[items]="organizationList['rows']"
								[virtualScroll]="true"
								bindLabel="name"
								bindValue="id"
								[dropdownPosition]="'bottom'"
								[searchable]="true"
								[editableSearchTerm]="true"
								formControlName="associateId"
								appendTo="body"
								placeholder=""
								(scrollToEnd)="onScrollClient()"
								(search)="getClientList($event)"
								*ngIf="isAdminAccess"
							>
								<ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
									<input
										id="item-{{ index }}"
										class="form-check-input"
										type="checkbox"
										[ngModel]="item$.selected"
										[ngModelOptions]="{ standalone: true }"
									/>
									{{ item.name }}
								</ng-template>
								<ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
									<div class="ng-value ps-2" *ngFor="let item of items | slice: 0:4">
										<span class="ng-value-label">{{ item.name }}</span>
										<span class="ng-value-icon ps-2" aria-hidden="true">,</span>
									</div>
									<div class="ng-value ps-2" *ngIf="items.length > 4">
										<span class="ng-value-label ps-2">{{ items.length - 4 }} more...</span>
									</div>
								</ng-template>
							</ng-select>
							<div class="text-left" *ngFor="let error of errorMessages?.associateId">
								<ng-container
									*ngIf="
										form['associateId'].hasError(error.type) &&
										(form['associateId'].dirty || form['associateId'].touched)
									"
								>
									<span class="text-danger">{{ error.message }}</span>
								</ng-container>
							</div> -->
						</div>
					</div>
					<div class="col-lg-6 col-md-12 col-sm-12 py-2">
						<div class="form-group">
							<label class="form-label text-custom-black"
								><span canViewEnterAttach>Enter</span> Designation (Optional)</label
							>
							<input
								type="text"
								class="form-control"
								id="designation"
								placeholder=""
								formControlName="designation"
							/>
							<div class="text-left" *ngFor="let error of errorMessages.designation">
								<ng-container
									*ngIf="
										form['designation'].hasError(error.type) &&
										(form['designation'].dirty || form['designation'].touched)
									"
								>
									<span class="text-danger">{{ error.message }}</span>
								</ng-container>
							</div>
						</div>
					</div>
				</div>
				<div class="row" formArrayName="userAssociations">
					<ng-container *ngFor="let _ of userAssociations.controls; let i = index">
						<div class="col-lg-6 col-md-6 col-sm-12 mb-3">
							<div class="form-group" [formGroupName]="i">
								<label class="form-label text-custom-black">
									<span canViewEnterAttach>Select</span> Region
								</label>
								<select
									class="form-select text-capitalize"
									aria-label="select example"
									formControlName="regionId"
									(change)="onRegionChangeHandler($event)"
								>
									<option [value]="item.id" *ngFor="let item of regionList">
										<span>{{ item.title }}</span>
									</option>
								</select>
								<div class="text-left" *ngFor="let error of errorMessages.regionId">
									<ng-container
										*ngIf="
											_.controls['regionId'].hasError(error.type) &&
											(_.controls['regionId'].dirty || _.controls['regionId'].touched)
										"
									>
										<span class="text-danger">{{ error.message }}</span>
									</ng-container>
								</div>
							</div>
						</div>
						<div class="col-lg-6 col-md-6 col-sm-12 mb-3">
							<div class="form-group" [formGroupName]="i" *ngIf="siteList">
								<label class="form-label text-custom-black">
									<span canViewEnterAttach>Select</span> Site
								</label>
								<ng-select
									class="form-control text-capitalize"
									[items]="siteList"
									[virtualScroll]="true"
									placeholder=""
									bindValue="id"
									bindLabel="name"
									[dropdownPosition]="'bottom'"
									[searchable]="true"
									[editableSearchTerm]="true"
									formControlName="sitesId"
									(scrollToEnd)="onScrollToEnd()"
								>
								</ng-select>
								<div class="text-left" *ngFor="let error of errorMessages.sitesId">
									<ng-container
										*ngIf="
											_.controls['sitesId'].hasError(error.type) &&
											(_.controls['sitesId'].dirty || _.controls['sitesId'].touched)
										"
									>
										<span class="text-danger">{{ error.message }}</span>
									</ng-container>
								</div>
							</div>
						</div>
					</ng-container>
				</div>
				<div
					class="d-flex justify-content-end my-2"
					*ngIf="[roles.PROTO_SUPER_ADMIN, roles.PROTO_ADMIN, roles.PROTO_USER].includes(currentUser?.role)"
				>
					<button type="button" class="btn btn-primary ms-4" (click)="onSubmit()" *appIsGranted="'EDIT'">
						Save
					</button>
				</div>
			</form>
		</div>
	</div>

	<div class="d-flex justify-content-end">
		<button type="button" class="btn-preview border-0" (click)="goBack()">
			<img src="assets/icons/arrow-left.svg" class="img-fluid" alt="clip" /> Previous
		</button>
		<button type="button" class="btn-next border-0" (click)="goNext()">
			Next <img src="assets/icons/arrow-right.svg" class="img-fluid" alt="clip" />
		</button>
	</div>

	<div class="mt-4">
		<app-verification-status></app-verification-status>
	</div>
</div>
